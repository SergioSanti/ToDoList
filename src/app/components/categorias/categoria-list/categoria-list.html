<div class="categoria-list-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Categorias</h1>
      <p class="page-subtitle">Organize suas tarefas por categorias</p>
    </div>
    <a routerLink="/categorias/nova" class="btn btn-primary">
      <span class="btn-icon">➕</span>
      Nova Categoria
    </a>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="loading-container">
    <div class="spinner"></div>
    <p>Carregando categorias...</p>
    </div>
  }

  <!-- Content -->
  @if (!isLoading()) {
    <div class="content">
    <!-- Categories Grid -->
    <div class="categories-grid">
      @if (categorias().length === 0) {
        <div class="empty-state">
        <div class="empty-icon">🏷️</div>
        <h3>Nenhuma categoria encontrada</h3>
        <p>Você ainda não tem categorias cadastradas.</p>
        <a routerLink="/categorias/nova" class="btn btn-primary">
          Criar Primeira Categoria
        </a>
        </div>
      }

      @for (categoria of categorias(); track categoria.id) {
        <div class="category-card">
        <div class="category-header">
          <div class="category-color" [style.background-color]="categoria.cor"></div>
          <div class="category-info">
            <h3 class="category-name">{{ categoria.nome }}</h3>
            <p class="category-description">{{ categoria.descricao }}</p>
          </div>
          <div class="category-actions">
            <a 
              [routerLink]="['/categorias/editar', categoria.id]"
              class="btn btn-sm btn-secondary"
              title="Editar categoria"
            >
              ✏️
            </a>
            <button 
              type="button"
              (click)="deleteCategoria(categoria)"
              class="btn btn-sm btn-danger"
              title="Excluir categoria"
            >
              🗑️
            </button>
          </div>
        </div>

        <div class="category-stats">
          <div class="stat-item">
            <span class="stat-label">Tarefas:</span>
            <span class="stat-value">{{ getTarefasCount(categoria.id) }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Cor:</span>
            <span class="stat-color" [style.background-color]="categoria.cor"></span>
            <span class="stat-value">{{ categoria.cor }}</span>
          </div>
        </div>

        <div class="category-footer">
          <a 
            routerLink="/tarefas"
            [queryParams]="{ categoria: categoria.id }"
            class="btn btn-sm btn-outline-primary"
          >
            Ver Tarefas ({{ getTarefasCount(categoria.id) }})
          </a>
          @if (getTarefasCount(categoria.id) === 0) {
            <span class="no-tasks">
              Nenhuma tarefa nesta categoria
            </span>
          }
        </div>
        </div>
      }
    </div>
    </div>
  }
</div>